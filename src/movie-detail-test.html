


<!doctype html>
<html class="no-js">
<!--<![endif]-->
<head>
    
      

	<title>
               
        </title>
	<meta name="Title" content="" />
	<meta name="PageTitle" content="" />
	<meta name="keywords" content="" />
	<meta name="Description" content="" />


    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" href="http://reelcinemas.ae/images/favicon.ico">
    <link id="LinkHTML1" href="http://reelcinemas.ae/en/System/css/style.css" type="text/css" rel="stylesheet" />
    <link id="LinkHTML2" href="http://reelcinemas.ae/en/System/css/custom.css" type="text/css" rel="stylesheet" />
    <!--[if lt IE 9]>
        <link href="http://reelcinemas.ae/en/System/css/fluid-grid.css" type="text/css" rel="stylesheet" />
        <link href="http://reelcinemas.ae/en/System/css/bootstrap.css" type="text/css" rel="stylesheet" />
        <link href="http://reelcinemas.ae/en/System/css/fhmm.css" type="text/css" rel="stylesheet" />
        <link href="http://reelcinemas.ae/en/System/css/steps-tabs.css" type="text/css" rel="stylesheet" />
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
         <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/jquery-ui.min.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/tabby/buoy.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/tabby/tabby.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/bxslider/jquery.bxslider.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/functions.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/jquery.mmenu.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/jquery.dropdownPlain.js"></script>
    <script src="http://reelcinemas.ae/system/scripts/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/fancybox/jquery.fancybox.js?v=2.1.5"></script>
    <script src="http://reelcinemas.ae/system/scripts/respond.min.js"></script>
    <script src="http://reelcinemas.ae/system/scripts/imagesloaded.pkgd.min.js"></script>
    <script src="http://reelcinemas.ae/system/Scripts/modernizr.js"></script>
    <script src="http://reelcinemas.ae/system/Scripts/CustomFilters.js"></script>
    <script type="text/javascript" src="http://reelcinemas.ae/system/scripts/ddtf.js"></script>
    <script src="http://reelcinemas.ae/system/Scripts/date.js"></script>
    <script type="text/javascript">
        if (top.location != self.location) {
            top.location = self.location.href
        }
    </script>
    <script>
        var SessionData, selectedCinemas, nowShowingMoviesData, topFiveMoviesData, futuremovieData, comingSoonMovieData, advancedBookingData, nextChangeData, cinemaData;

        jQuery(document).ready(function ($) {
            $.ajaxSetup({ cache: false });
            $.getJSON('MoviesSession.json', function (nowShowingdata) {
                nowShowingMoviesData = nowShowingdata;

                /*
                nowShowingMoviesData = sortResults(nowShowingMoviesData, 'Genre', 'asc');
                nowShowingMoviesData = sortResults(nowShowingMoviesData, 'Rating', 'asc');
                */
            }).fail(function (jqXHR, textStatus, errorThrown) {
                //  alert('getJSON nowShowing request failed! ' + textStatus);
            });

            $.getJSON('Sessions.json', function (data) {
                SessionData = data;
              //  SessionData = SessionData.sort(custom_sort);
            }).fail(function (jqXHR, textStatus, errorThrown) {
                // alert('getJSON nowShowing request failed! ' + textStatus);
            });

            $.getJSON('Cinemas.json', function (cinemadata) {
                cinemaData = cinemadata;
            }).fail(function (jqXHR, textStatus, errorThrown) {
                // alert('getJSON Cinemas request failed! ' + textStatus);
            });

            $.getJSON('ComingSoon.json', function (data) {
                comingSoonMovieData = data;
            }).fail(function (jqXHR, textStatus, errorThrown) {
                // alert('getJSON ComingSoonMovies request failed! ' + textStatus);
            });


            $.getJSON('TopFiveMoviesweb.json', function (topFivedata) {
                topFiveMoviesData = topFivedata;
            }).fail(function (jqXHR, textStatus, errorThrown) {
                //alert('getJSON TopFiveMovies request failed! ' + textStatus);
            });

        });

        function custom_sort(a, b) {
            return new Date(a.SessionDate).getTime() - new Date(b.SessionDate).getTime();
        }
        function sortResults(data, prop, asc) {

            data = data.sort(function (a, b) {
                if (asc) return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
                else return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
            });
            return data;
        }


        document.cookie = "reel=7000"
        function toggleDisplay(id) {
            if (!document.getElementById) { return; }
            var el = document.getElementById('popupsurvey1');
            if (el.style.display == 'block') {
                el.style.display = 'none';
                date = new Date();
                date.setTime(date.getTime() + (90 * 24 * 60 * 60 * 1000));
                document.cookie = "ispop=yes" + "; expires=" + date.toGMTString();
            }
            else {
                el.style.display = '';
            }
        }



        function myFunction() {
            document.cookie = "reel=600";
            if (!document.getElementById) { return; }
            var el = document.getElementById('popupsurvey1');
            if (el.style.display == 'block') {
                el.style.display = 'none';
                date = new Date();
                date.setTime(date.getTime() + (7 * 60 * 1000));
                document.cookie = "ispop=yes" + "; expires=" + date.toGMTString();
                //alert(date.toGMTString());
            }
            else {
                el.style.display = '';
            }
        }


    </script>
	
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1085064,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>	
	
</head>
<body>
    <!-- Google Tag Manager -->
    <noscript>
        <iframe src="http://reelcinemas.ae//www.googletagmanager.com/ns.html?id=GTM-WTGWN3" height="0" width="0"
            style="display: none; visibility: hidden"></iframe>
    </noscript>
    <script>        (function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({ 'gtm.start':
new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-WTGWN3');</script>
    <!-- End Google Tag Manager -->
    <!------------------------SOCIAL FEEDS-------------------------->
    
<div id="fb-root">
</div>
<script>    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));</script>
<div class="panel">
    <div class="fb-like-box" data-href="https://www.facebook.com/reelcinemasdubai" data-width="260"
        data-colorscheme="light" data-show-faces="false" data-header="false" data-stream="true"
        data-show-border="false">
    </div>
</div>
<a class="trigger" href="#">
    <img src="http://reelcinemas.ae/images/icons/facebook-feed.png"></a>
<div class="panel2">
    <a class="twitter-timeline" href="https://twitter.com/ReelCinemas" data-widget-id="531309258046832641">
        Tweets by @ReelCinemas</a>
    <script>        !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + "://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");</script>
</div>
<a class="trigger2" href="#">
    <img src="http://reelcinemas.ae/images/icons/twitter-feed.png"></a>
<div class="panel3" id="popupsurvey1">
    <img src="http://reelcinemas.ae/Images/reel-popup-survey-new.png" alt="" border="0" usemap="#Map" />
    <map name="Map" id="Map">
        <area shape="rect" coords="10,106,139,170" href="http://weconnect.emaar.com/Response.aspx?ID=12ee779fa328c0dc80bc3a5e7d3a2ff7"
            alt="tdm" target="_blank" />
        <area shape="rect" coords="145,107,273,170" href="http://weconnect.emaar.com/Response.aspx?ID=1aac6b2fcb74301452d32ddd6668d2dd"
            alt="dmm" target="_blank" />
        <area shape="rect" coords="10,179,140,241" href="http://weconnect.emaar.com/Response.aspx?ID=a5b699281766effea5bbc88866a03c3e"
            alt="beach" target="_blank" />
        <area shape="rect" coords="144,177,272,239" href="http://weconnect.emaar.com/Response.aspx?ID=301083bd66a58f40135fcf2f2c653ffa"
            alt="beach" target="_blank" />
        <area shape="rect" coords="25,260,129,281" href="javascript:void(0);myFunction();"
            alt="remind later" />
        <area shape="rect" coords="136,258,267,282" href="javascript:void(0);toggleDisplay('popup');"
            alt="Dont show again" />
    </map>
</div>

    <!------------------------Header Mobile STARTS HERE-------------------------->
    <!--Menu left remove from here-->
    <!--END Header Mobile-->
    <!------------------------STANDARD HEADER STARTS HERE-------------------------->
			
<div class="gridContainer clearfix">
    <div class="mainContent">
        
        <div id="availableDatesDiv" class="date" style="display:none;">
        </div>
        <table id="table_format" class="table_format">
            <tbody>
            </tbody>
        </table>
    </div>
</div>
<style>

    

</style>
<script>

    $(document).on('click', '.soldout', function (e) {

        return false;
    });

    var from = "movie-details";
    var moviedData = "NowShowing";
     var movieTitle = "Mortal Engines";

    //
    var str1 = "Mortal Engines";
    var str2 = "20";
    if (str1.indexOf(str2) != -1) {

        movieTitle = (movieTitle).replace(/20/g, "2.0");
        console.log(movieTitle);
    }

    //
   
    var ticketingUrl = 'https://ticketing.reelcinemas.ae/Tickets/SelectSeats.aspx';
    var showTimingctrl = 0;
    var normalExp = "", Standard3DExp = "", Platinum3DExp = "", platinumExp = "", MX4DExp = "", BARCOExp = "", DineInExp = "", ReelBoutique = "", ScreenX = "", Premier = "", ReelJunior = "", DolbyExp = "", DolbyExp3D = "", premierExp = "", pictureHouseExp = "", defaultExp = "", availability, sessionHtml = "", uniqueCinemaNames, url, uniqueMovieNames;
    var movieFilter = "", cinemaFilter = "", expFilter = "", trailerHtml = "", unavailableMovie = 0;
   
    $(document).ready(function () {
        // alert("Show Loading...");

        $(document).on('click', '.confirm', function (e) {
            $.fancybox.close();
        })

        $('#ShowTimeMainDiv').hide();
        $('#movieDetails').hide();
        $('#playBtn').click(function () {
            if (trailerHtml!="")
            $('#trailer').append(trailerHtml);

        });
       
    });

 

    $(document).ajaxComplete(function () {
    
        if (showTimingctrl == 0 && nowShowingMoviesData != undefined && SessionData != undefined && comingSoonMovieData != undefined) {

           // alert("Content is ready. Hide loading gif, Show movie details and timings.");
		   
		   // Kids friendly changes
		   $.each(SessionData, function (){
		   if (this.Experience == 'Family-Dine-In')
		   {
		   this.KidsFriendly = true;
		   this.Experience ='Dine-In';
		   }
		   });

            var sessionTimings;
            if (from == 'movie-details') {

                //movieFilter = "doesNotExists";
                BuildmovieDetails()
                sessionTimings = Fetchdates(SessionData, movieTitle);
               // sessionTimings = sortResults(sessionTimings, 'Session_dtmDate_Time', 'asc');
                if (unavailableMovie == 1) {
                    window.location.href = "http://reelcinemas.ae/en/";
                }

                if (sessionTimings.length == 0) {
                    $('#availableDatesDiv').hide();
                    $('#table_format').hide();
                    $('#ShowTimeMainDiv').show();
                    $('#movieDetails').show();

                }
                else {
                    //BuildmovieDetails()

                    $('#ShowTimeMainDiv').show();
                    $('#movieDetails').show();
                    $('#availableDatesDiv').show();
                    $('#table_format').show();
                    $('#table_format').ddTableFilter();
                    BuildTimingControl(sessionTimings);
                    BuildSessionControl(sessionTimings, SelectedDate, 0);

                    
                }

                showTimingctrl = 1;

            }
            else if (from == 'showtiming') {

                $('#ShowTimeMainDiv').hide();
                $('#movieDetails').hide();
              //  SessionData = sortResults(SessionData, 'Session_dtmDate_Time', 'asc');
                BuildTimingControl(SessionData);
                BuildSessionControl(SessionData, SelectedDate, 0);
                $('#availableDatesDiv').show();
                $('#table_format').show();
                $('#table_format').ddTableFilter();
                showTimingctrl = 1;

               

                showTimingctrl = 1;

               
            }

            //hide loading gif
            $('#loadingDiv').hide();
            $('#availableDatesDiv').show();
            

        }

        
       
    });


   



    function BuildmovieDetails() {

        if (tabledetailsCtrl == 0 && nowShowingMoviesData != undefined && SessionData != undefined && comingSoonMovieData != undefined) {

            var data;

            if (moviedData == 'ComingSoon' || moviedData == 'AdvanceBooking' || moviedData == 'NextChange') {
                data = comingSoonMovieData;
            }

            if (moviedData == 'NowShowing' || moviedData == 'TopFive') {
                data = nowShowingMoviesData;
            }
            if (moviedData.length <= 0)// when the movie data details doesnt come in the parameter, find which json the movie belong to.
            {
                var findMovieData = GetMovieObjectForMovies(comingSoonMovieData, movieTitle)
                if (findMovieData.length > 0) {

                    data = comingSoonMovieData;
                }
                else {
                    data = nowShowingMoviesData;
                }

            }


            if (typeof data == 'undefined') {
                unavailableMovie = 1;
                showTimingctrl == 0
                return;
            }

            var movieDetails = GetMovieObjectForMovies(data, movieTitle)


            if (movieDetails.length <= 0) {
                unavailableMovie = 1;
                showTimingctrl == 0
                return;
            }
            else {
               
                var synopsis = [], tarilerSrc;
				var languagesdetail = [];
                //var synposisVal = [];
                var innerVal = [];
				var innerValTwo =[];
                synopsis = movieDetails[0].Synopsis.split('\n');
				languagesdetail = movieDetails[0].MovieLanguage.split('\n');
                var imagesrc = 'https://www.reelcinemas.ae/en/KeyArts/Vertical/' + movieDetails[0].MovieImage;

                if (movieDetails[0].MovieTrailer != "")
                    tarilerSrc = 'https://www.reelcinemas.ae/en/KeyArts/Tarilers/' + movieDetails[0].MovieTrailer;
                else
                    tarilerSrc = "";
                if (tarilerSrc != "") {
                    trailerHtml = ' <object type="application/x-shockwave-flash" id="player1" name="player1" data="/swf/player.swf?d" width="45%" height="360"><param name="allowfullscreen" value="true">';
                    trailerHtml += '<param name="allowscriptaccess" value="always"><param name="play" value="false" /><param name="movie" value="/swf/player.swf&autoStart=false">';
                    trailerHtml += '<param  name="flashvars" value=Url=' + tarilerSrc + '&amp;autostart=false"> </object>'
                   
                    $('#trailerButton').html('<span class="watchTrailer"><a class="various" data-fancybox-type="iframe" href="ShowTrailer.aspx?param1=' + movieDetails[0].MovieTrailer + '"><span>Watch Trailer</span></a></span>');

                    

                }
                else {
                    tarilerSrc = "../Images/no-trailer.png";
                    trailerHtml = "";
                }
                
                jQuery.each(synopsis, function (i, val) {

                    innerVal = val.split(':');
                    if (innerVal[0] == 'Subtitle') {
                        $('#subTitle').append(innerVal[1]);
                    }
                    if (innerVal[0] == 'Director') {
                        $('#director').append(innerVal[1]);
                    }
                    if (innerVal[0] == 'Cast') {
                        $('#cast').append(innerVal[1]);
                    }
                    if (innerVal[0] == 'Synopsis') {
                        $('#synopsis').append(innerVal[1]);
                    }
                });
				
				
				jQuery.each(languagesdetail, function (i, val) {
				innerValTwo = val.split(':');
				    if (innerValTwo[0] == 'Subtitle') {
                        $('#subTitle').append(innerValTwo[1]);
                    }
                    if (innerValTwo[0] == 'Language') {
                        $('#language').append(innerValTwo[1]);
                    }
				
				});
				
				
				//$('#synopsis').append(synopsis[0]);
                $('#genre').append(movieDetails[0].Genre);
                $('#duration').append(movieDetails[0].Duration);
               // $('#language').append(movieDetails[0].MovieLanguage);
                $('#rating').append(movieDetails[0].Rating);

 if (movieDetails[0].Rating=='TBA') {
                  $('#divTBA').append("<p style='"+
                   "font-size: 13px; padding-top: 21px;color: red;'><span style=' color: #ffffff;font-weight: 900;   font-size: 19px; '>TBA:</span> Rating to be announced; entry into the cinema will only be allowed in line with the rating. Booking is at your own responsibility.</p>");
                  }

                $('#movieName').append(movieDetails[0].MovieName);

                if (movieDetails[0].MovieName.toUpperCase().indexOf('3D') < 0) {
                    $('#3dImg').hide();
                }
                if (movieDetails[0].MovieName.toUpperCase().indexOf('ATMOS') < 0) {
                    $('#dolby').hide();
                }
                if (movieDetails[0].MovieName.toUpperCase().indexOf('MX4D') < 0) {
                    $('#mx4d').hide();
                }
                if (movieDetails[0].MovieName.indexOf('ESC') < 0) {
                    $('#baresc').hide();
                }
                if (movieDetails[0].MovieName.toUpperCase().indexOf('3D ATMOS') >= 0) {
                    $('#3dImg').show();
                    $('#dolby').show();
                }
                if (movieDetails[0].MovieName.toUpperCase().indexOf('MX4D') >= 0) {
                    $('#mx4d').show();
                }
                if (movieDetails[0].MovieName.indexOf('ESC') >= 0) {
                    $('#baresc').show();
                }



               
                if (trailerHtml != "")
                    $('#trailerImg').attr('src', tarilerSrc);
                else
                $('#playBtn').attr('src', tarilerSrc);
                $('#movieImg').attr('src', imagesrc);
                var sessionTimings = Fetchdates(SessionData, movieTitle);
                tabledetailsCtrl = 1;
            }
        }
    }

    function SortByExperiance(a, b) {

        if (a.sortorder == b.sortorder)
        {
            return 0;
        }
        else if (a.sortorder > b.sortorder)
        {
            return 1;
        }
        else if (a.sortorder < b.sortorder) {
            return -1;
        }
    }

	function SortByDate(a, b){
       var amyDate = a.split("/");
       var aNewDate=new Date(amyDate[1]+","+amyDate[0]+","+amyDate[2]).getTime();
       var bmyDate = b.split("/");
       if (amyDate[2] > bmyDate[2])
	   {
	   return 1;
	   }
	   else if (amyDate[2]< bmyDate[2])
	   {
	   return -1;
	   }
	   else if (amyDate[2] = bmyDate[2])
	   {
	    if (amyDate[0] < bmyDate[0])
	     {
	     return -1;
	     }
	     else if (amyDate[0] > bmyDate[0])
	     {
	     return 1;
	     }
		 else if (amyDate[0] = bmyDate[0])
		 {
		 if (amyDate[1] < bmyDate[1])
	     {
	     return -1;
	     }
	     else if (amyDate[1] > bmyDate[1])
	     {
	     return 1;
	     }
		 
		 
		 }
	   
	   }
	   
	  
    }
	
	
	
    function BuildTimingControl(sessionTimings) {
        var htmlcontrol = '<span>Date</span><ul id="dateCntrl">';

        var availableDates = [];
        $.each(sessionTimings, function (idx, obj) {
            availableDates.push(obj.SessionDate);
        });

        availableDates = GetUnique(availableDates);
        var dayNames = new Array('SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT');
        var nData;
        var i = 1;

		
		 availableDates.sort(SortByDate);
		
        $.each(availableDates, function (idx, obj) {

            var month = "";
            nData = new Date(obj);

            var dayid = 'day';
            dayid += '_' + i;
            if (i == 1) {
                htmlcontrol += '<li id=' + "'" + dayid + "'" + 'class="current">';

                SelectedDate = obj;
            }
            else {
                htmlcontrol += '<li id=' + "'" + dayid + "'>";
            }
            nData = new Date(obj);
            if (nData.getMonth() <= 8) {
                month += '0' + (nData.getMonth() + 1);
            }
            else {
                month += nData.getMonth() + 1;
            }

            htmlcontrol += '<a class="timingCls" onclick="ShowTiming(' + "'" + dayid + "'" + ',' + "'" + obj + "'" + ',' + "'" + movieTitle + "'" + ');" href="#cinemaTimings">' + dayNames[nData.getDay()] + ' ' + nData.getDate() + '/' + month + '</a></li>';

            i++;

        });

        htmlcontrol += '</ul>';
        $('#availableDatesDiv').append(htmlcontrol);
    }

	
    function BuildSessionControl(sessionTimings, SelectedDate, retainFilter) {


        sessionHtml = "";
      //  sessionTimings = sortResults(sessionTimings, 'SessionID', 'asc');
        // filter sessions for selected date

       
        
        if (from == 'movie-details') {
            sessionHtml += '<tr><th  id="cinemaDrpDown" class="cinema">All Cinemas</th><th id="expDrpDown" class="experience">Experience</th><td class="showtime">Showtimes<span class="soldout">Sold Out</span><span class="available">Available</span></td></tr>'
            sessionTimings = FilterByProperty(sessionTimings, 'SessionDate', SelectedDate)
            uniqueCinemaNames = groupBy(sessionTimings, 'CinemaName');
            sessionHtml = BuildSessionByUniqueCinemas(uniqueCinemaNames, sessionTimings, sessionHtml);

        }
        else if (from == 'showtiming') {

            if (retainFilter == 0) {
                sessionHtml += '<tr><th id="movieDrpDwn" class="movie">Movie</th><th  id="cinemaDrpDown" class="cinema">All Cinemas</th><th id="expDrpDown" class="experience">Experience</th><td class="showtime">Showtimes<span class="soldout">Sold Out</span><span class="available">Available</span></td></tr>'
            }
            sessionTimings = FilterByProperty(sessionTimings, 'SessionDate', SelectedDate)
            uniqueMovieNames = groupBy(sessionTimings, 'MovieName');
            sessionHtml = BuildSessionByUniqueMovieNames(uniqueMovieNames, sessionTimings, sessionHtml);
        }
        $('#table_format > tbody:last').append(sessionHtml);
    }

    function getParameterByName(name) {
        var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
    }

    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }


    function BuildSessionByUniqueCinemas(uniqueCinemaNames, sessionTimings, sessionHtml) {
        var params = getUrlVars();


        var uniqueexperiances = fetchExperiance(movieTitle, sessionTimings);
        uniqueexperiances = GetUnique(uniqueexperiances);
        var explist = [];
        $.each(uniqueexperiances, function (index, value) {
            var expitem = { experiance: "", sortorder: 6 };
            expitem.experiance = value;

             if (value == 'Dine-In') {
                expitem.sortorder = 1;
            }
			else if (value == 'Dolby Cinema') {
                expitem.sortorder = 2;
            }
            else if (value == 'Barco Escape') {
                expitem.sortorder = 3;
            }
            else if (value == 'MX4D') {
                expitem.sortorder = 4;
            }
            else if (value == 'Platinum-3D') {
                expitem.sortorder = 5;
            }
            else if (value == 'Platinum') {
                expitem.sortorder = 6;
            }
            else if (value == 'Standard-3D') {
                expitem.sortorder = 7;
            }
            else {
                expitem.sortorder = 8;
            }
            explist.push(expitem);
        });
        explist = explist.sort(SortByExperiance);
        uniqueexperiances = []
        $.each(explist, function () {
            uniqueexperiances.push(this.experiance);
        });

        $.each(uniqueexperiances, function (index, value) {

            $.each(uniqueCinemaNames, function (i, val) {

                var hassession = false;
                $.each(sessionTimings, function () {
                    if (val == this.CinemaName && value == this.Experience) {
                        hassession = true;
                    }

                });



                if (hassession) {
                    sessionHtml += '<tr><td>' + val + '</td>';
                    $.each(sessionTimings, function (idx, obj) {

                        if (val == obj.CinemaName && value == obj.Experience) {

                            // alert(obj.MovieName);

                            if (obj.Availability == 'available') {
                                availability = ''
                            }
                            else {
                                availability = 'soldout'
                            }

                            url = ticketingUrl + '?cinemacode=' + obj.CinemaId.toString() + '&txtSessionId=' + obj.SessionID;


                            //popupsection
                            var popupTitle = '';
                            var popupMessage = '';
                            var target = "target=\'_blank\'";

                            var isPlatinum = false;
                            if ((obj.Experience === 'Platinum' || obj.Experience === 'Platinum-3D') && 1 != 1) {
                        popupTitle = 'Platinum Movie Suites are open for patrons aged 18 and above.';
                        popupMessage = 'Before proceeding to the booking page, kindly confirm that the ticket holders will meet the age criteria.';
                        isPlatinum = true;
                            }
							// Kids friendly changes
							else if (obj.Experience  === 'Dine-In' && obj.KidsFriendly != null &&  obj.KidsFriendly == true ) {
                               popupTitle = 'This movie session in Dine-in Cinema is open to all ages. However, movie age rating policy applies.';
                               popupMessage = 'There will be no specialty beverages, hops or grape served.';
                        isPlatinum = true;
                    }

							

                            else if (obj.Experience === 'ScreenX' ) {
                                popupTitle = 'ScreenX';
                                popupMessage = 'Movies are screened from front to side walls, during specific scenes only.';
                        isPlatinum = true;
                    }








                    if (obj.MovieName.toUpperCase().indexOf('MX4D') != -1) {
                        if (popupTitle != '') {
                            popupTitle += '<br/>';
                            popupMessage += '<br/>';
                        }
                        popupTitle += 'You have selected an MX4D movie.';
                        popupMessage +=

              "<p>To enjoy this exciting immersive experience, you should be at least 40” tall and be able to sit and support yourself. </p>" +
                "<p>This experience may not be appropriate for people who may be pregnant have heart," +
                "back, head, leg or neck conditions, or other physical limitations," +
                "or those that may have reactions to scents, fog, or strobe lighting effects.</p>"

                    }


                    if (popupTitle != '') {
                        url = "javascript:assignConfirmUrl('" + obj.CinemaId.toString() + "'," + obj.SessionID + "," + "\'" + popupTitle + "\'" + "," + "\'" + popupMessage + "\'" + ");";
                        target = "";
                    }
                    //end popup section


                    if (obj.Experience == 'Platinum') {

                        platinumExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';

                    }
                    if (obj.Experience == 'Platinum-3D') {

                        Platinum3DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';

                    }
                    else if (obj.Experience == 'Normal') {
                        normalExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Standard') {
                        premierExp += '<li class=' + availability + '><a href="' + url + '" ' + target + '>' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Dolby Cinema') {
                        DolbyExp += '<li class=' + availability + '><a href="' + url + '" ' + target + '>' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Picture House') {
                        pictureHouseExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Dolby Cinema') {
                        DolbyExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'MX4D') {
                        MX4DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Standard-3D') {
                        Standard3DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Platinum-3D') {
                        Platinum3DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Dolby-3D') {
                        DolbyExp3D += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Barco Escape') {
                        BARCOExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
					else if (obj.Experience == 'Dine-In') {
                        DineInExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
					}
                    else if (obj.Experience == 'Reel Boutique') {
                        ReelBoutique += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'ScreenX') {
                        ScreenX += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == 'Reel Junior') {
                                ReelJunior += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                        else if (obj.Experience == 'Premier') {
                            Premier += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
                    else if (obj.Experience == "") {
                        defaultExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                    }
}

            });

    if (platinumExp != "") {
        sessionHtml += '<td>' + 'Platinum' + '</td><td><ul class="showtime"> ' + platinumExp + '</ul></td></tr>';
            }
            if (normalExp != "") {
                sessionHtml += '<td>' + 'Normal' + '</td><td><ul class="showtime"> ' + normalExp + '</ul></td></tr>';
            }
            if (premierExp != "") {
                sessionHtml += '<td>' + 'Standard' + '</td><td><ul class="showtime"> ' + premierExp + '</ul></td></tr>';
            }
            if (DolbyExp != "") {
                sessionHtml += '<td>' + 'Dolby Cinema' + '</td><td><ul class="showtime"> ' + DolbyExp + '</ul></td></tr>';
            }
            if (MX4DExp != "") {
                sessionHtml += '<td>' + 'MX4D' + '</td><td><ul class="showtime"> ' + MX4DExp + '</ul></td></tr>';
            }
            if (Standard3DExp != "") {
                sessionHtml += '<td>' + 'Standard-3D' + '</td><td><ul class="showtime"> ' + Standard3DExp + '</ul></td></tr>';
            }
            if (Platinum3DExp != "") {
                sessionHtml += '<td>' + 'Platinum-3D' + '</td><td><ul class="showtime"> ' + Platinum3DExp + '</ul></td></tr>';
            }
            if (DolbyExp3D != "") {
                        sessionHtml += '<td>' + 'Dolby-3D' + '</td><td><ul class="showtime"> ' + DolbyExp3D + '</ul></td></tr>';
            }
            if (BARCOExp != "") {
                sessionHtml += '<td>' + 'Barco Escape' + '</td><td><ul class="showtime"> ' + BARCOExp + '</ul></td></tr>';
            }
			if (DineInExp != "") {
                sessionHtml += '<td>' + 'Dine-In' + '</td><td><ul class="showtime"> ' + DineInExp + '</ul></td></tr>';
			}
            if (ReelBoutique != "") {
                sessionHtml += '<td>' + 'Reel Boutique' + '</td><td><ul class="showtime"> ' + ReelBoutique + '</ul></td></tr>';
            }
            if (ScreenX != "") {
                sessionHtml += '<td>' + 'ScreenX' + '</td><td><ul class="showtime"> ' + ScreenX + '</ul></td></tr>';
            }
            if (ReelJunior != "") {
                        sessionHtml += '<td>' + 'Reel Junior' + '</td><td><ul class="showtime"> ' + ReelJunior + '</ul></td></tr>';
            }
                    if (Premier != "") {
                        sessionHtml += '<td>' + 'Premier' + '</td><td><ul class="showtime"> ' + Premier + '</ul></td></tr>';
            }
            if (pictureHouseExp != "") {
                sessionHtml += '<td>' + 'Picture House' + '</td><td><ul class="showtime"> ' + pictureHouseExp + '</ul></td></tr>';
            }
            if (defaultExp != "") {
                sessionHtml += '<td>' + 'Normal' + '</td><td><ul class="showtime"> ' + defaultExp + '</ul></td></tr>';
            }


                    normalExp = ""; platinumExp = ""; DolbyExp = ""; Standard3DExp = ""; Platinum3DExp = ""; MX4DExp = ""; DolbyExp3D = ""; BARCOExp = ""; DineInExp = ""; ReelBoutique = ""; ScreenX = ""; Premier = ""; ReelJunior = ""; premierExp = ""; pictureHouseExp = ""; defaultExp = "";
        }


    });


    });

    return sessionHtml;
}

    // JavaScript source code

    function BuildSessionByUniqueMovieNames(uniqueMovieNames, sessionTimings, sessionHtml) {
        //  var cinemaAdded = 0;           
        var respectiveSessions;
        var params = getUrlVars();

        var uniqueexperiances = fetchExperianceAll(sessionTimings);
        uniqueexperiances = GetUnique(uniqueexperiances);
        var explist = [];
        $.each(uniqueexperiances, function (index, value) {
            var expitem = { experiance: "", sortorder: 6 };
            expitem.experiance = value;

            if (value == 'Dine-In') {
                expitem.sortorder = 1;
            }
			else if (value == 'Dolby Cinema') {
                expitem.sortorder = 2;
            }
            else if (value == 'Barco Escape') {
                expitem.sortorder = 3;
            }
            else if (value == 'MX4D') {
                expitem.sortorder = 4;
            }
            else if (value == 'Platinum-3D') {
                expitem.sortorder = 5;
            }
            else if (value == 'Platinum') {
                expitem.sortorder = 6;
            }
            else if (value == 'Standard-3D') {
                expitem.sortorder = 7;
            }
            else {
                expitem.sortorder = 8;
            }
            explist.push(expitem);
        });
        explist = explist.sort(SortByExperiance);
        uniqueexperiances = []
        $.each(explist, function () {
            uniqueexperiances.push(this.experiance);
        });

        $.each(uniqueexperiances, function (index, value) {

            uniqueCinemaNames = fetchCinemas(sessionTimings);
            uniqueCinemaNames = GetUnique(uniqueCinemaNames);

            $.each(uniqueCinemaNames, function (i, cin) {


                $.each(uniqueMovieNames, function (i, val) {

                    respectiveSessions = fetchSessions(sessionTimings, val, cin, value);
                    if (respectiveSessions.length > 0)
                    { sessionHtml += '<tr><td>' + val + '</td><td>' + cin + '</td>'; }
                    $.each(respectiveSessions, function (idx, obj) {

                        if (cin == obj.CinemaName && value == obj.Experience) {

                            //alert(obj.MovieName);

                            if (obj.Availability == 'available') {
                                availability = ''
                            }
                            else {
                                availability = 'soldout'
                            }
                            //url = ticketingUrl + '?cinemacode=' + obj.CinemaId + '&txtSessionId=' + obj.SessionID;


                            url = ticketingUrl + '?cinemacode=' + obj.CinemaId.toString() + '&txtSessionId=' + obj.SessionID;


                            //popupsection
                            var popupTitle = '';
                            var popupMessage = '';
                            var isPlatinum = false;
                            var target = "target=\'_blank\'";
                            if ((obj.Experience === 'Platinum' || obj.Experience === 'Platinum-3D') && 1 != 1) {
                            popupTitle = 'Platinum Movie Suites are open for patrons aged 18 and above.';
                            popupMessage = 'Before proceeding to the booking page, kindly confirm that the ticket holders will meet the age criteria.';
                            isPlatinum = true;
                        }
						// Kids friendly changes
							else if (obj.Experience  === 'Dine-In' && obj.KidsFriendly != null &&  obj.KidsFriendly == true ) {
                               popupTitle = 'This movie session in Dine-in Cinema is open to all ages. However, movie age rating policy applies.';
                               popupMessage = 'There will be no specialty beverages, hops or grape served.';
                        isPlatinum = true;
                    }

							
                            else if (obj.Experience === 'ScreenX' ) {
                                popupTitle = 'ScreenX';
                                popupMessage = 'Movies are screened from front to side walls, during specific scenes only.';
                        isPlatinum = true;
                    }









                        if (obj.MovieName.toUpperCase().indexOf('MX4D') != -1) {
                            if (popupTitle != '') {
                                popupTitle += '<br/>';
                                popupMessage += '<br/>';
                            }
                            popupTitle += 'You have selected an MX4D movie.';
                            popupMessage +=

                  "<p>To enjoy this exciting immersive experience, you should be at least 40” tall and be able to sit and support yourself. </p>" +
                    "<p>This experience may not be appropriate for people who may be pregnant have heart," +
                    "back, head, leg or neck conditions, or other physical limitations," +
                    "or those that may have reactions to scents, fog, or strobe lighting effects.</p>"

                        }


                        if (popupTitle != '') {
                            url = "javascript:assignConfirmUrl('" + obj.CinemaId.toString() + "'," + obj.SessionID + "," + "\'" + popupTitle + "\'" + "," + "\'" + popupMessage + "\'" + ");";
                            target = "";
                        }
                        //end popup section

                        if (obj.Experience == 'Platinum') {

                            platinumExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Normal') {
                            normalExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Standard') {
                            premierExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Dolby Cinema') {
                            DolbyExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'MX4D') {
                            MX4DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Standard-3D') {
                            Standard3DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Platinum-3D') {
                            Platinum3DExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Dolby-3D') {
                            DolbyExp3D += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Barco Escape') {
                            BARCOExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
						else if (obj.Experience == 'Dine-In') {
                            DineInExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
						}
                        else if (obj.Experience == 'Reel Boutique') {
                            ReelBoutique += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'ScreenX') {
                            ScreenX += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                            else if (obj.Experience == 'Premier') {
                            Premier += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Reel Junior') {
                                ReelJunior += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == 'Picture House') {
                            pictureHouseExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }
                        else if (obj.Experience == "") {
                            defaultExp += '<li class=' + availability + '><a href="' + url + '" ' + target + ' >' + obj.SessionTime + '</a></li>';
                        }

}

                });

            if (platinumExp != "") {
                sessionHtml += '<td>' + 'Platinum' + ' </td><td><ul class="showtime"> ' + platinumExp + '</ul></td></tr>';
                }
            if (normalExp != "") {
                sessionHtml += '<td> ' + 'Normal' + ' </td><td><ul class="showtime"> ' + normalExp + '</ul></td></tr>';
                }
            if (premierExp != "") {
                sessionHtml += '<td> ' + 'Standard' + ' </td><td><ul class="showtime"> ' + premierExp + '</ul></td></tr>';
                }
            if (DolbyExp != "") {
                sessionHtml += '<td> ' + 'Dolby Cinema' + ' </td><td><ul class="showtime"> ' + DolbyExp + '</ul></td></tr>';
                }
            if (MX4DExp != "") {
                sessionHtml += '<td> ' + 'MX4D' + ' </td><td><ul class="showtime"> ' + MX4DExp + '</ul></td></tr>';
                }
            if (Standard3DExp != "") {
                sessionHtml += '<td> ' + 'Standard-3D' + ' </td><td><ul class="showtime"> ' + Standard3DExp + '</ul></td></tr>';
                }
            if (Platinum3DExp != "") {
                sessionHtml += '<td> ' + 'Platinum-3D' + ' </td><td><ul class="showtime"> ' + Platinum3DExp + '</ul></td></tr>';
                }
                    if (DolbyExp3D != "") {
                        sessionHtml += '<td> ' + 'Dolby-3D' + ' </td><td><ul class="showtime"> ' + DolbyExp3D + '</ul></td></tr>';
                }
            if (BARCOExp != "") {
                sessionHtml += '<td> ' + 'Barco Escape' + ' </td><td><ul class="showtime"> ' + BARCOExp + '</ul></td></tr>';
                }
			if (DineInExp != "") {
                sessionHtml += '<td> ' + 'Dine-In' + ' </td><td><ul class="showtime"> ' + DineInExp + '</ul></td></tr>';
			}
            if (ReelBoutique != "") {
                        sessionHtml += '<td> ' + 'Reel Boutique' + ' </td><td><ul class="showtime"> ' + ReelBoutique + '</ul></td></tr>';
            } 
            if (ScreenX != "") {
                  sessionHtml += '<td> ' + 'ScreenX' + ' </td><td><ul class="showtime"> ' + ScreenX + '</ul></td></tr>';
            }
            if (ReelJunior != "") {
                        sessionHtml += '<td> ' + 'Reel Junior' + ' </td><td><ul class="showtime"> ' + ReelJunior + '</ul></td></tr>';
            }
                    if (Premier != "") {
                        sessionHtml += '<td> ' + 'Premier' + ' </td><td><ul class="showtime"> ' + Premier + '</ul></td></tr>';
            }
            if (pictureHouseExp != "") {
                sessionHtml += '<td> ' + 'Picture House' + ' </td><td><ul class="showtime"> ' + pictureHouseExp + '</ul></td></tr>';
                }
            if (defaultExp != "") {
                sessionHtml += '<td> ' + 'Normal' + ' </td><td><ul class="showtime"> ' + defaultExp + '</ul></td></tr>';
                }


                    normalExp = ""; platinumExp = ""; premierExp = ""; Standard3DExp = ""; Platinum3DExp = ""; DolbyExp = ""; MX4DExp = ""; DolbyExp3D = ""; DineInExp = ""; ReelBoutique = ""; ScreenX = ""; Premier = ""; ReelJunior = ""; BARCOExp = ""; pictureHouseExp = ""; defaultExp = "";




        });



        });


    });

    return sessionHtml;
}


    function ShowTiming(dayid, SelectedDate, selectedMovie) {
        // ////debugger
        
        var sessionHtml = "";
        var sessionTimings;
        if ($('#table_format tr').size() > 1) {
            //////debugger
            //$('#table_format tr').slice(1).remove();
            $('#table_format tr').remove();
        }


        if (selectedMovie != "") {
            sessionTimings = Fetchdates(SessionData, selectedMovie);
            BuildSessionControl(sessionTimings, SelectedDate);
        }
        else {
            BuildSessionControl(SessionData, SelectedDate, 0);
        }




        var datecntrl = '#dateCntrl';
        $(datecntrl).find('li').each(function () {
            var current = $(this);
            $(current).removeClass();
        });
        $('#' + dayid).addClass('current');
        $('#table_format').removeClass("ddtf-processed");
        $('#table_format').ddTableFilter();
        if (from == "movie-details") {

            ApplyFiltersWithOutMovies();

        }
        else {
            ApplyFiltersWithMovies();
        }

        // $('#table_format').find('select').trigger('change');


    }



    function ApplyFiltersWithMovies() {
        // ////debugger

        movieFilter = decodeURIComponent(movieFilter);

        if (movieFilter != "" || cinemaFilter != "" || expFilter != "") {
            $("#table_format tr:not(:first)").hide();
        }
        $("#movieDrpDwn").find("option:contains('" + movieFilter + "')").each(function () {
            if ($(this).text() == movieFilter) {
                isMovieChange = 1;
                $(this).attr("selected", "selected");
                movieFilter = $(this).text();
            }

        });
        $("#cinemaDrpDown").find("option:contains('" + cinemaFilter + "')").each(function () {

            if ($(this).text() == cinemaFilter) {
                iscinemachange = 1;
                $(this).attr("selected", "selected");
                cinemaFilter = $(this).text();
            }

        });
        $("#expDrpDown").find("option:contains('" + expFilter.trim() + "')").each(function () {
            if ($(this).text() == expFilter.trim()) {
                isexpchange = 1;
                $(this).attr("selected", "selected");
                expFilter = $(this).text();
            }

        });



        $('#table_format > tbody  > tr:not(:first)').each(function (i, row) {

            var rowMovie = row.cells[0].textContent;
            var rowCinema = row.cells[1].textContent;
            var rowExp = row.cells[2].textContent;
            var isMovieFilter = 0, isCinemaFltr = 0, isExpFltr = 0;
            var filterCondition = "";

            if (movieFilter != "") {
                isMovieFilter = 1;
            }
            if (cinemaFilter != "") {
                isCinemaFltr = 1;
            }

            if (expFilter != "") {
                isExpFltr = 1;
            }


            if (isMovieFilter == 1 && isCinemaFltr == 1 && isExpFltr == 1) {
                if (rowMovie == movieFilter && rowCinema == cinemaFilter && rowExp == expFilter) {
                    $(this).show();
                }
            }
            if (isMovieFilter == 1 && isCinemaFltr == 0 && isExpFltr == 0) {
                if (rowMovie == movieFilter) {
                    $(this).show();
                }
            }
            if (isCinemaFltr == 1 && isExpFltr == 0 && isMovieFilter == 0) {
                if (rowCinema == cinemaFilter) {
                    $(this).show();
                }
            }
            if (isExpFltr == 1 && isMovieFilter == 0 && isCinemaFltr == 0) {
                if (rowExp.trim() == expFilter.trim()) {
                    $(this).show();
                }
            }
            if (isMovieFilter == 1 && isCinemaFltr == 1 && isExpFltr == 0) {

                if (rowMovie == movieFilter && rowCinema == cinemaFilter) {

                    $(this).show();
                }
            }
            if (isMovieFilter == 1 && isCinemaFltr == 0 && isExpFltr == 1) {
                if (rowMovie == movieFilter && rowExp.trim() == expFilter.trim()) {
                    $(this).show();
                }
            }
            if (isMovieFilter == 0 && isCinemaFltr == 1 && isExpFltr == 1) {
                if (rowCinema == cinemaFilter && rowExp.trim() == expFilter.trim()) {
                    $(this).show();
                }

            }
            if (isMovieFilter == 0 && isCinemaFltr == 0 && isExpFltr == 0) {

                $(this).show();


            }




        });







    }

    function ApplyFiltersWithOutMovies() {
        // ////debugger


        if (expFilter != "" || cinemaFilter != "") {
            $("#table_format tr:not(:first)").hide();
        }

        $("#cinemaDrpDown").find("option:contains('" + cinemaFilter + "')").each(function () {

            if ($(this).text() == cinemaFilter) {
                iscinemachange = 1;
                $(this).attr("selected", "selected");
                cinemaFilter = $(this).text();
            }

        });
        $("#expDrpDown").find("option:contains('" + expFilter.trim() + "')").each(function () {
            if ($(this).text() == expFilter.trim()) {
                isexpchange = 1;
                $(this).attr("selected", "selected");
                expFilter = $(this).text();
            }

        });



        $('#table_format > tbody  > tr:not(:first)').each(function (i, row) {


            var rowCinema = row.cells[0].textContent;
            var rowExp = row.cells[1].textContent;
            var isCinemaFltr = 0, isExpFltr = 0;

            if (cinemaFilter != "") {
                isCinemaFltr = 1;
            }

            if (expFilter != "") {
                isExpFltr = 1;
            }


            if (isCinemaFltr == 1 && isExpFltr == 1) {
                if (rowCinema == cinemaFilter && rowExp == expFilter) {
                    $(this).show();
                }
            }
            if (isCinemaFltr == 1 && isExpFltr == 0) {
                if (rowCinema == cinemaFilter) {
                    $(this).show();
                }
            }

            if (isExpFltr == 1 && isCinemaFltr == 0) {
                if (rowExp.trim() == expFilter.trim()) {
                    $(this).show();
                }
            }

            if (isCinemaFltr == 0 && isExpFltr == 0) {
                $(this).show();
            }

        });







    }

    function fetchSessions(sessionTimings, movieName, cinemaName, experiance) {
        var result = [];
        $.each(sessionTimings, function (idx, obj) {

            if (obj.MovieName === movieName && obj.CinemaName == cinemaName && obj.Experience == experiance) {
                result.push(obj);
            }
        });
        return result;
    }

    function fetchCinemas( data) {

        var result = [];
        $.each(data, function (idx, obj) {
           // if (obj.MovieName === selectedMovies) {
                result.push(obj.CinemaName);
          //  }
        });
        return result;
    }
	
	function fetchExperiance( moviename, data) {

        var result = [];
        $.each(data, function (idx, obj) {
            if (obj.MovieName === moviename ) {
                result.push(obj.Experience);
            }
        });
        return result;
	}
	function fetchExperianceAll(data) {

	    var result = [];
	    $.each(data, function (idx, obj) {
	        
	            result.push(obj.Experience);
	     
	    });
	    return result;
	}
	
    function GetMovieObjectForMovies(data, movieName) {
        var result = [];
        $.each(data, function (idx, obj) {

            if (obj.MovieName === movieName) {
                result.push(obj);
            }
        });
        return result;

    }

    function Fetchdates(data, movieTitle) {

        var result = [];
        if (movieTitle != "") {
            $.each(data, function (idx, obj) {

                if (obj.MovieName === movieTitle) {
                    result.push(obj);
                }

            });
        }
        else {
            $.each(data, function (idx, obj) {
                result.push(obj.SessionDate);


            });
        }
        return result;
    }
    function GetUnique(data) {
        var dupes = {};
        var singles = [];
        $.each(data, function (i, d) {
            if (!dupes[d]) {
                dupes[d] = true;
                singles.push(d);
            }
        });

        return singles;
    }
    function FilterByProperty(dataarray, filterproperty, filterData) {
        var result = [];
        $.each(dataarray, function (idx, obj) {

            if (filterproperty == "SessionDate") {

                var StartDate = new Date(filterData);
                StartDate.setHours(StartDate.getHours() + 6);
                var EndDate = new Date(StartDate);
                EndDate.setDate(EndDate.getDate() + 1);
                EndDate.setHours(EndDate.getHours());

                var dateStr = obj.Session_dtmDate_Time;
                var Sessiondate = new Date(dateStr)
                if (Sessiondate >= StartDate && Sessiondate < EndDate){
                //if (obj.SessionDate == filterData) {
                    result.push(obj);
                }
            }
            if (filterproperty == "CinemaName") {
                if (obj.CinemaName == filterData) {
                    result.push(obj);
                }
            }
        });
        return result;
    }

    function groupBy(items, propertyName) { // provides unique cinema names
        var result = [];
        var pushVal = propertyName;
        $.each(items, function (index, item) {
            if ($.inArray(item[propertyName], result) == -1) {
                result.push(item[pushVal]);
            }
        });
        return result;
    }

    function GetMovieObjectForMovies(data, movieName) {
        var result = [];
        $.each(data, function (idx, obj) {

            if (obj.MovieName === movieName) {
                result.push(obj);
            }
        });
        return result;

    }

    function assignConfirmUrl(CinemaId, SessionID, popupTitle, popupMessage) {
		var params = getUrlVars();
  
        var url;
        
        url = ticketingUrl + '?cinemacode=' + CinemaId.toString() + '&txtSessionId=' + SessionID;
       
        $("#plConfirm").attr("href", url);
        $('#hiddenclicker').trigger('click');

        $('#popTitle').html(popupTitle);
        $('#popMessage').html(popupMessage);
    }

    

</script>


	
    <script>
        var tabledetailsCtrl = 0;
        var SelectedDate;
    </script>
    <!------------------------FOOTER STARTS HERE-------------------------->


</body>
<script src="http://reelcinemas.ae/system/scripts/imagesloaded.pkgd.min.js"></script>
<script src="http://reelcinemas.ae/system/scripts/easyResponsiveTabs.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $.ajaxSetup({ cache: false });

        $('#nowShowing').easyResponsiveTabs({

            type: 'default', //Types: default, vertical, accordion           
            width: 'auto', //auto or any width like 600px
            fit: true,   // 100% fit in a container
            closed: '', // Start closed if in accordion view
            activate: function (event) { // Callback function if tab is switched
                hidNowShowingDivs();
                var $tab = $(this);
                var $info = $('#tabInfo');
                var $name = $('span', $info);
                $name.text($tab.text());
                $info.show();
            }
        });
        $('#moviesDiv').easyResponsiveTabs({

            type: 'default', //Types: default, vertical, accordion           
            width: 'auto', //auto or any width like 600px
            fit: true,   // 100% fit in a container
            closed: '', // Start closed if in accordion view
            activate: function (event) { // Callback function if tab is switched
                hidNowShowingDivs();

                hideAdvancedBookingDivs();
                hideComingSoonDivs();
                var $tab = $(this);
                var $info = $('#tabInfo');
                var $name = $('span', $info);
                $name.text($tab.text());
                $info.show();
            }
        });

        $('#comingSoon').easyResponsiveTabs({
            type: 'default', //Types: default, vertical, accordion           
            width: 'auto', //auto or any width like 600px
            fit: true,   // 100% fit in a container
            closed: '', // Start closed if in accordion view
            activate: function (event) { // Callback function if tab is switched

                hideAdvancedBookingDivs();
                hideComingSoonDivs();
                var $tab = $(this);
                var $info = $('#tabInfo');
                var $name = $('span', $info);

                $name.text($tab.text());

                $info.show();
            }
        });

        $('#selectDate').easyResponsiveTabs({
            type: 'default', //Types: default, vertical, accordion           
            width: 'auto', //auto or any width like 600px
            fit: true,   // 100% fit in a container
            closed: '', // Start closed if in accordion view
            activate: function (event) { // Callback function if tab is switched
                var $tab = $(this);
                var $info = $('#tabInfo');
                var $name = $('span', $info);
                $name.text($tab.text());
                $info.show();
            }
        });

        //TOUCH FRIENDLY IN MOBILE DEVICES
        document.addEventListener("touchstart", function () { }, true);



    });
    $(document).on('click', '.moreMovies', function (e) {

        if (e.currentTarget.id === "nowShowMore") {

            $('#nowshow' + divValue).show();
            divValue = divValue + 1;
            if (!$('#nowshow' + (divValue)).length) {
                $("#nowShowMore").hide();
            }
            else {
                $('#nowshow' + divValue).show();
                divValue = divValue + 1;
                if (!$('#nowshow' + (divValue)).length) {
                    $("#nowShowMore").hide();
                }
            }

        }
        if (e.currentTarget.id === "NextChangeMore") {

            $('#NextChange' + NextChangeValue).show();
            NextChangeValue = NextChangeValue + 1;
            if (!$('#NextChange' + (NextChangeValue)).length) {
                $("#NextChangeMore").hide();
            }
            else {
                $('#NextChange' + NextChangeValue).show();
                NextChangeValue = NextChangeValue + 1;
                if (!$('#NextChange' + (NextChangeValue + 1)).length) {
                    $("#NextChangeMore").hide();
                }
            }

        }
        if (e.currentTarget.id === "AdvancedBookingMore") {
            $('#AdvancedBooking' + AdvancedBookingValue).show();
            AdvancedBookingValue = AdvancedBookingValue + 1;
            if (!$('#AdvancedBooking' + (AdvancedBookingValue)).length) {
                $("#AdvancedBookingMore").hide();
            }
            else {
                $('#AdvancedBooking' + AdvancedBookingValue).show();
                AdvancedBookingValue = AdvancedBookingValue + 1;
                if (!$('#AdvancedBooking' + (AdvancedBookingValue)).length) {
                    $("#AdvancedBookingMore").hide();
                }
            }
        }
        if (e.currentTarget.id === "ComingSoonMore") {
            $('#ComingSoon' + ComingSoonValue).show();
            ComingSoonValue = ComingSoonValue + 1;
            if (!$('#ComingSoon' + (ComingSoonValue)).length) {
                $("#ComingSoonMore").hide();
            }
            else {
                $('#ComingSoon' + ComingSoonValue).show();
                ComingSoonValue = ComingSoonValue + 1;
                if (!$('#ComingSoon' + (ComingSoonValue)).length) {
                    $("#ComingSoonMore").hide();
                }
            }
        }

    })

    function ActivateMenu(dest) {
        $('.menu li').removeClass('current');
        $('#' + dest).parent().addClass('active');
        $('#' + dest).parent().addClass('current');
    }

</script>
<script>

    function hideComingSoonDivs() {
        var comingSoonValue = $("#ComingSoon").children.length;
        for (i = 2; i <= comingSoonValue + 1; i++) {
            $("#ComingSoon" + i).hide();
        }
        ComingSoonValue = 2;
    }

    function hideAdvancedBookingDivs() {
        var advancedBookingValue = $("#AdvancedBooking").children.length;
        for (i = 2; i <= advancedBookingValue + 1; i++) {
            $("#AdvancedBooking" + i).hide();
        }
        AdvancedBookingValue = 2;
    }

</script>




</html>
